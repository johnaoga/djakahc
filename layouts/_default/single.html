{{ define "main" }}
  <article>
    <h1>{{ .Title }}</h1>
    {{- $cover := .Params.cover -}}
    {{- if $cover -}}
      {{- $cres := .Resources.GetMatch $cover -}}
      {{- if $cres -}}
        <img src="{{ $cres.RelPermalink }}" alt="" style="width:100%; max-height:320px; object-fit:cover; border-radius:8px; margin:8px 0 16px;" />
      {{- else -}}
        <img src="{{ $cover | relURL }}" alt="" style="width:100%; max-height:320px; object-fit:cover; border-radius:8px; margin:8px 0 16px;" />
      {{- end -}}
    {{- end -}}

    {{ if eq .Section "competitions" }}
      <div class="card" style="margin-bottom:16px">
        <strong>Dates:</strong> {{ with .Params.startDate }}{{ . }}{{ end }} {{ with .Params.endDate }}- {{ . }}{{ end }}<br/>
        <strong>Lieu:</strong> {{ .Params.location }}
      </div>
    {{ end }}

    <div class="content-body">{{ .Content }}</div>

    {{ if .Params.gallery }}
      <h3>Galerie</h3>
      <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px;">
        {{ range .Params.gallery }}
          {{- $g := . -}}
          {{- $gres := $.Resources.GetMatch $g -}}
          {{- if $gres -}}
            <img src="{{ $gres.RelPermalink }}" alt="" style="width:100%; height:160px; object-fit:cover; border-radius:6px;" />
          {{- else -}}
            <img src="{{ $g | relURL }}" alt="" style="width:100%; height:160px; object-fit:cover; border-radius:6px;" />
          {{- end -}}
        {{ end }}
      </div>
    {{ end }}
  </article>
{{ end }}
